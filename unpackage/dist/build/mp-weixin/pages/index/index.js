(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"2cb8":function(e,t,n){"use strict";var a=n("dadb"),i=n.n(a);i.a},"2d6f":function(e,t,n){"use strict";n.r(t);var a=n("8019"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},3426:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"906d"))},uniEcCanvas:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-ec-canvas/uni-ec-canvas")]).then(n.bind(null,"cd12"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"1356"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showPicker=!0})},o=[]},"56ab":function(e,t,n){"use strict";var a=n("dbad"),i=n.n(a);i.a},"6ed5":function(e,t,n){"use strict";(function(e){n("7910");a(n("66fd"));var t=a(n("7656"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},7656:function(e,t,n){"use strict";n.r(t);var a=n("3426"),i=n("2d6f");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("2cb8"),n("56ab");var r,c=n("f0c5"),s=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"0a915cea",null,!1,a["a"],r);t["default"]=s.exports},8019:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){n.e("components/loading").then(function(){return resolve(n("f718"))}.bind(null,n)).catch(n.oe)},i=null,o=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-ec-canvas/uni-ec-canvas")]).then(function(){return resolve(n("cd12"))}.bind(null,n)).catch(n.oe)},r={components:{Loading:a,uniEcCanvas:o},data:function(){return{ec:{lazyLoad:!0,option:{tooltip:{trigger:"axis",formatter:function(e,t,n){var a=e[0].axisValue+"\n"+e[0].seriesName+":"+e[0].value+"℃\n"+e[1].seriesName+":"+e[1].value+"℃";return a},position:function(e,t,n,a,i){return[60,e[1]]}},grid:{left:"6%",right:"6%",top:"15%",bottom:"6%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["2-12","2-14","2-16","2-18","2-20","2-22","2-24"],axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},color:["#92DCC7","#B2D494"],legend:{data:["最高气温","最低气温"]},series:[{name:"最高气温",type:"line",smooth:!0,symbol:"none",lineStyle:{color:"#92DCC7"},data:[28,29,31,34,30,30,29]},{name:"最低气温",type:"line",smooth:!0,symbol:"none",lineStyle:{color:"#B2D494"},data:[24,23,20,23,20,26,23]}]}},showLoading:!1,showPicker:!1,defautlRegion:["广东省","东莞市","东莞市"],locationName:"东莞市",cur_img_value:1,chart:{day_list:["04-27","04-28","04-29","04-30"],max_temp_list:[29,29,29,29],min_temp_list:[20,19,21,21]},option:{},weather:{cur_temp:30,max_temp:"33",min_temp:"26",water_value:"66",wind_unit:"西南风1级",wind_value:"",fur_day_wea:[{day_text_value:"今天",day_wea_icon:"../../static/images/weather_icons/weathercn/1.png",day_wea_text:"多云"},{day_text_value:"星期五",day_wea_icon:"../../static/images/weather_icons/weathercn/2.png",day_wea_text:"阴天"},{day_text_value:"星期六",day_wea_icon:"../../static/images/weather_icons/weathercn/3.png",day_wea_text:"阵雨"},{day_text_value:"星期天",day_wea_icon:"../../static/images/weather_icons/weathercn/4.png",day_wea_text:"雷阵雨"}],cur_desc:"",cur_wind_desc:"",next_wea_desc:""}}},mounted:function(){var e=this;e.$nextTick((function(){e.$refs["canvas"].init()}))},onLoad:function(){},onUnload:function(){i&&(i.dispose(),i=null)},onShow:function(){var e=this;e.getLocationBySDK()},methods:{chooseCity:function(e){var t=this;t.locationName=e.city.label,t.defautlRegion=[e.province.label,e.city.label,e.area.label],t.getWeatherByLocation(t.locationName)},getLocationBySDK:function(){var e=this,t=n("2cab"),a=new t.AMapWX({key:"210e9c5f5f988e0aa466d869da3a9171"});a.getPoiAround({success:function(t){if(t){var n=t.poisData[0].cityname;t.markers[0].latitude,t.markers[0].longitude;e.location=n,e.regionStr=n,e.getWeatherByLocation(n)}},fail:function(t){console.error("info",t),e.getCurLocation()}})},getCurLocation:function(){var t=this;e.getLocation({type:"gcj02",address:!0,geocode:!0,success:function(e){if(e){var n=e.address.city;e.latitude,e.longitude;t.location=n,t.getWeatherByLocation(n)}},fail:function(e){console.error("res",e)},complete:function(){}})},getWeatherByLocation:function(t){var n=this;n.showLoading=!0;var a="5619664a9da343f0a87eea51ad4dad0d";e.request({url:"https://jisutqybmf.market.alicloudapi.com/weather/query",method:"GET",data:{city:t},header:{Authorization:"APPCODE "+a},timeout:1e4,success:function(e){0===e.data.status&&new Promise((function(e,t){setTimeout((function(){n.showLoading=!1,e()}),1500)})).then((function(){var t=e.data.result,a=parseInt(t.img),i=t.daily;n.weather.cur_temp=t.temp,n.weather.cur_img_value=a,n.weather.max_temp=t.temphigh,n.weather.min_temp=t.templow,n.weather.water_value=t.humidity,n.weather.wind_unit=t.winddirect,n.weather.wind_value=t.windpower,n.weather.cur_desc=t.weather,n.weather.cur_wind_desc=t.winddirect+t.windpower;var o=[],r=[],c=[],s=[],u="../../static/images/weather_icons/weathercn/",d=".png";for(var l in a>12&&(n.other_wea_icon=u+a+d),i)if(l<4){var h=void 0,f=i[l].date.substr(5);r.push(f),c.push(i[l].day.temphigh),s.push(i[l].night.templow),h=0==l?{day_text_value:"今天",day_wea_icon:u+i[l].day.img+d,day_wea_text:i[l].day.weather}:{day_text_value:i[l].week,day_wea_icon:u+i[l].day.img+d,day_wea_text:i[l].day.weather},o.push(h)}n.weather.fur_day_wea=o,n.ec.option.xAxis.data=r,n.ec.option.series[0].data=c,n.ec.option.series[1].data=s}))},fail:function(t){n.showLoading=!1,e.showToast({title:"服务器开小差了...",icon:"none",mask:!0,duration:2e3})}})},showDesc:function(t){var n=t.currentTarget.dataset.desc;e.showToast({title:n,icon:"none"})},initChart:function(){var e=this,t=e.getPixelRatio();return i=wxEcharts.init(canvas,null,{width:width,height:height,devicePixelRatio:t}),canvas.setChart(i),i.setOption(),i},getPixelRatio:function(){var e=0;return wx.getSystemInfo({success:function(t){e=t.pixelRatio},fail:function(){e=0}}),e},setOption:function(e,t,n){var a={xAxis:{type:"category",axisTick:{show:!1},boundaryGap:!1,axisLine:{show:!1},splitLine:{show:!1},data:e},yAxis:{type:"value",axisTick:{show:!1},boundaryGap:!1,axisLine:{show:!1,onZero:!1,lineStyle:{type:"solid"}},splitLine:{show:!1}},grid:{top:"10%",bottom:"10%",left:"12%",right:"12%"},tooltip:{trigger:"axis",formatter:function(e,t,n){var a=e[0].axisValue+"\n"+e[0].seriesName+":"+e[0].value+"℃\n"+e[1].seriesName+":"+e[1].value+"℃";return a},position:function(e,t,n,a,i){return[120,e[1]]}},color:["#92DCC7","#B2D494"],legend:{data:["最高温","最低温"]},series:[{name:"最高气温",data:t,type:"line",symbol:"none",itemStyle:{normal:{lineStyle:{color:"#92DCC7"}}}},{name:"最低气温",data:n,symbol:"none",type:"line",itemStyle:{normal:{lineStyle:{color:"#B2D494"}}}}]};return a},getMaxOrMin:function(e,t){return"max"==t?Math.max.apply(Math,e):"min"==t?Math.min.apply(Math,e):void 0}}};t.default=r}).call(this,n("543d")["default"])},dadb:function(e,t,n){},dbad:function(e,t,n){}},[["6ed5","common/runtime","common/vendor"]]]);